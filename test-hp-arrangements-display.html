<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HP Arrangements Test</title>
    <link rel="stylesheet" href="reservierungen/css/reservation.css">
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }

        .test-container {
            background: #2d8f4f;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <h1>HP Arrangements Header Test</h1>

    <div class="test-container">
        <div class="header-content">
            <div class="header-info">
                <strong>Test Reservierung</strong> - Beispiel Info
            </div>

            <div class="header-arrangements" id="headerArrangements">
                <div class="header-arr-title">HP Arrangements</div>
                <div class="header-arr-content" id="headerArrContent">
                    <div class="loading-arr">Arrangements laden...</div>
                </div>
                <button class="header-arr-edit-btn" id="headerArrEditBtn">✏️</button>
            </div>

            <div class="header-buttons">
                <button class="header-btn">Test Button</button>
            </div>
        </div>
    </div>

    <script>
        // Simuliere das Laden von HP Arrangements
        setTimeout(() => {
            console.log('Loading HP arrangements...');

            const headerArrContent = document.getElementById('headerArrContent');
            if (headerArrContent) {
                console.log('headerArrContent found');

                // Test-Daten simulieren
                const testArrangements = [
                    {
                        display_name: 'BHP Fleisch (Test-Zeitklasse)',
                        total_count: 2,
                        time_class: 'time-old',
                        guests: { '36934': 'Oliver Gottschalk' }
                    },
                    {
                        display_name: 'BHP Veg. (FRESH)',
                        total_count: 1,
                        time_class: 'time-fresh',
                        guests: { '36934': 'Oliver Gottschalk' }
                    },
                    {
                        display_name: 'HP Fleisch',
                        total_count: 7,
                        time_class: 'time-future',
                        guests: { '36934': 'Oliver Gottschalk' }
                    }
                ];

                let html = '';
                testArrangements.forEach(arr => {
                    const guestCount = Object.keys(arr.guests || {}).length;
                    const countDisplay = guestCount > 1 ? `${arr.total_count}x (${guestCount} Gäste)` : `${arr.total_count}x`;

                    html += `
                        <div class="header-arr-item ${arr.time_class}">
                            <span class="arr-display-name">${arr.display_name}</span>: 
                            <span class="arr-count ${arr.time_class}">${countDisplay}</span>
                        </div>
                    `;
                });

                console.log('Setting HTML to:', html);
                headerArrContent.innerHTML = html;
                console.log('HTML set successfully');
            } else {
                console.error('headerArrContent not found');
            }
        }, 1000);
    </script>
</body>

</html>