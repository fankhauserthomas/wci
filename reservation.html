<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reservierung anzeigen</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="reservation.css">
  <link rel="stylesheet" href="css/navigation.css">
  <link rel="stylesheet" href="css/navigation-integration.css">
</head>

<body>
  <!-- Navigation wird durch JavaScript eingef√ºgt -->

  <main class="main-content">
    <!-- Reservation Header (gr√ºn) -->
    <div id="resHeader" class="res-header">
      <div class="header-content">
        <div class="header-info">
          <!-- Wird durch JavaScript bef√ºllt -->
        </div>
        <div class="header-menu">
          <button id="menuBtn" class="menu-btn">‚ãÆ</button>
          <div id="dropdownMenu" class="dropdown-menu hidden">
            <button id="editBtn" class="dropdown-item">Bearbeiten</button>
            <button id="emailBtn" class="dropdown-item">üìß E-Mail senden</button>
            <button id="stornoBtn" class="dropdown-item">Storno</button>
            <button id="deleteReservationBtn" class="dropdown-item" style="color: #dc3545;">üóëÔ∏è L√∂schen</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Bar -->
    <div id="actionBar" class="action-bar">
      <button id="deleteBtn">L√∂schen</button>
      <button id="printBtn">Drucken</button>
      <button id="arrangementBtn" class="btn-arrangement">Arrangement‚Ä¶</button>
      <button id="dietBtn" class="btn-diet">Di√§t‚Ä¶</button>
      <button id="bulkCheckinBtn" class="btn-bulk" disabled>Bulk Check-in</button>
      <button id="bulkCheckoutBtn" class="btn-bulk" disabled>Bulk Check-out</button>
      <button id="backBtn">Zur√ºck zur Liste</button>
    </div>

    <!-- Namen-Tabelle -->
    <div class="table-container">
      <table id="namesTable" class="names-list">
        <thead>
          <tr>
            <th><input type="checkbox" id="selectAll"></th>
            <th>Name</th>
            <th>Details</th>
            <th>Alter</th>
            <th>Bemerkung</th>
            <th>BF</th>
            <th>Arr</th>
            <th>Di√§t</th>
            <th>No-Show</th>
            <th>Check-in</th>
            <th>Check-out</th>
          </tr>
        </thead>
        <tbody>
          <!-- Wird durch JavaScript bef√ºllt -->
        </tbody>
      </table>
    </div>

    <!-- Arrangement Modal -->
    <div id="arrangementModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <span id="closeArrModal" class="modal-close">&times;</span>
        <h2>Arrangement w√§hlen</h2>
        <div id="arrButtonsContainer" class="arr-buttons"></div>
      </div>
    </div>

    <!-- Diet Modal -->
    <div id="dietModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <span id="closeDietModal" class="modal-close">&times;</span>
        <h2>Di√§t w√§hlen</h2>
        <div id="dietButtonsContainer" class="arr-buttons"></div>
      </div>
    </div>

    <!-- Namen hinzuf√ºgen -->
    <details id="addNamesDetails">
      <summary>Namen hinzuf√ºgen</summary>
      <div class="import-format-selector">
        <label for="importFormat">Format:</label>
        <select id="importFormat">
          <option value="firstname-lastname">Vorname Nachname</option>
          <option value="lastname-firstname">Nachname Vorname</option>
        </select>
      </div>
      <textarea id="newNamesTextarea" rows="5" placeholder="pro Zeile ein Eintrag"></textarea>
      <button id="importNamesBtn">Importieren</button>
    </details>

    <!-- Custom Confirmation Modal -->
    <div id="confirmModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <span class="modal-close" id="confirmModalClose">&times;</span>
        <h3 id="confirmModalTitle">Best√§tigung</h3>
        <div id="confirmModalMessage"></div>
        <div id="confirmModalQuestion"></div>
        <div class="modal-buttons">
          <button id="confirmModalYes" class="btn-confirm">Ja</button>
          <button id="confirmModalNo" class="btn-cancel">Nein</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Connection Status -->
  <div class="connection-status" id="connection-indicator">
    <div class="status-dot"></div>
    <span class="status-text">Verbindung pr√ºfen...</span>
  </div>

  <!-- Navigation System -->
  <script src="js/navigation.js"></script>
  <script src="js/email-utils.js"></script>
  <script src="js/http-utils.js"></script>
  <script src="js/loading-overlay.js"></script>
  <script src="reservation.js"></script>

  <script>
    // Navigation und Initialisierung
    document.addEventListener('DOMContentLoaded', function () {
      // Navigation Setup
      if (typeof NavigationSystem !== 'undefined') {
        NavigationSystem.setupNavigation();
        console.log('‚úÖ Navigation setup completed');
      } else {
        console.warn('‚ö†Ô∏è NavigationSystem not found');
      }

      // Connection Status
      const indicator = document.getElementById('connection-indicator');
      if (indicator && window.connectionMonitor && window.updateConnectionStatus) {
        window.updateConnectionStatus();
      }

      console.log('‚úÖ Reservation page initialized');
    });
  </script>
</body>

</html>